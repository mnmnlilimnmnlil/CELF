/* ============================================
   CELF - Sections Styles
   카드 그리드 및 각 세포 인터랙션 섹션
   ============================================ */

/* ============================================
   Section 01: 카드 그리드
   ============================================ */

.section-grid {
    background: #ffffff;
    padding-top: 6rem;
    margin-top: 100vh; /* 메인 히어로 높이만큼 아래에서 시작 */
    display: flex;
    justify-content: center;
    align-items: center;
}

[data-theme="dark"] .section-grid {
    background: #000000;
}

.card-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4rem;
    max-width: 1600px;
    width: fit-content;
    padding: 4rem;
    perspective: 1000px;
    justify-items: center;
    align-items: center;
}

.cell-card {
    width: 380px;
    height: 530px;
    position: relative;
    cursor: pointer;
    transition: transform 0.2s ease-out;
    transform-style: preserve-3d;
    background: #000000;
    border-radius: 24px;
    overflow: hidden;
    will-change: transform;
}

[data-theme="dark"] .cell-card {
    background: #ffffff;
}

.cell-card-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: linear-gradient(105deg,
        transparent 40%,
        rgba(255, 255, 255, 0.8) 45%,
        rgba(255, 255, 255, 0.6) 50%,
        transparent 54%);
    filter: brightness(1.1) opacity(0);
    mix-blend-mode: color-dodge;
    background-size: 150% 150%;
    background-position: 50% 50%;
    background-repeat: no-repeat;
    transition: filter 0.1s;
    pointer-events: none;
    z-index: 2;
    border-radius: 24px;
    will-change: background-position, filter;
}

[data-theme="dark"] .cell-card-overlay {
    /* 다크모드: 흰색 배경에 흰색 빛 반사 효과 (약간 덜 밝게) */
    /* background-position은 JavaScript에서 제어하므로 변경하지 않음 */
    background-image: linear-gradient(105deg,
        transparent 40%,
        rgba(255, 255, 255, 0.6) 45%,
        rgba(255, 255, 255, 0.5) 50%,
        transparent 54%);
    mix-blend-mode: color-dodge;
}

.cell-card-content {
    position: relative;
    z-index: 1;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    overflow: hidden;
}

.cell-card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
}

.cell-card-title {
    position: absolute;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.9);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    z-index: 2;
}

[data-theme="dark"] .cell-card-title {
    background: rgba(10, 10, 10, 0.9);
    color: var(--text-primary);
}

/* ============================================
   Section 02: 프라임 세포 (공감 세포)
   ============================================ */

#primeCharacter {
    animation: primePulse 2s ease-in-out infinite;
}

@keyframes primePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* ============================================
   Section 03: 출출 세포
   ============================================ */

.food-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
}

.food-emoji {
    position: absolute;
    font-size: 3rem;
    animation: floatUp 3s ease-out forwards;
    pointer-events: auto; /* 클릭 가능하도록 변경 */
    cursor: pointer; /* 클릭 가능한 커서 */
    user-select: none; /* 드래그 선택 방지 */
    -webkit-user-select: none; /* Safari */
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* IE/Edge */
    z-index: 5;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}

@keyframes floatUp {
    0% {
        opacity: 0;
        transform: translateY(20px) scale(0.5) rotate(-10deg);
    }
    20% {
        opacity: 1;
        transform: translateY(-30px) scale(1) rotate(5deg);
    }
    60% {
        transform: translateY(-80px) scale(1.1) rotate(-5deg);
    }
    90% {
        opacity: 1;
        transform: translateY(-130px) scale(1.2) rotate(3deg);
    }
    100% {
        opacity: 0;
        transform: translateY(-180px) scale(0.8) rotate(-10deg);
    }
}

.eating-mouth {
    position: absolute;
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--text-primary);
    z-index: 10;
    animation: eatAnimation 0.8s ease-out forwards;
    pointer-events: none;
    white-space: nowrap;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); /* 다크모드 기본 */
    transform-origin: center center;
}

[data-theme="light"] .eating-mouth {
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.5); /* 화이트 모드: 흰색 쉐도우 */
}

@keyframes eatAnimation {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.3) rotate(var(--rotation, 0deg));
    }
    30% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.2) rotate(var(--rotation, 0deg)) translateY(-20px);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9) rotate(var(--rotation, 0deg)) translateY(-40px);
    }
}

/* ============================================
   Section 04: 호기심 세포
   ============================================ */

/* 눈 관련 스타일 제거됨 - 새로운 인터랙션 사용 */

.particle-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 3;
    overflow: hidden;
}

/* 호버 시 캐릭터 주변을 회전하는 파티클 */
.curious-rotate-particle {
    position: absolute;
    font-size: 2rem;
    color: var(--text-primary);
    font-weight: bold;
    pointer-events: none;
    z-index: 4;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    transform: translate(-50%, -50%);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

[data-theme="light"] .curious-rotate-particle {
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.4);
}

/* 클릭 시 나타나는 호기심 텍스트 버블 */
.curious-text-bubble {
    position: absolute;
    font-size: 1.2rem;
    color: var(--text-primary);
    font-weight: bold;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    animation: curiousTextAppear 2s ease-out forwards;
    pointer-events: none;
    z-index: 5;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    transform: translate(-50%, -50%) rotate(var(--rotation, 0deg));
    white-space: nowrap;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .curious-text-bubble {
    background: rgba(0, 0, 0, 0.9);
    color: var(--text-primary);
}

[data-theme="light"] .curious-text-bubble {
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
}

@keyframes curiousTextAppear {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.3) rotate(var(--rotation, 0deg));
    }
    20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.1) rotate(var(--rotation, 0deg)) translateY(-10px);
    }
    80% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1) rotate(var(--rotation, 0deg)) translateY(-30px);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8) rotate(var(--rotation, 0deg)) translateY(-50px);
    }
}

/* 호기심 세포 반응 텍스트 (호버/클릭/스크롤) */
.curious-reaction-text {
    position: absolute;
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--text-primary);
    padding: 0.8rem 1.5rem;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 25px;
    animation: curiousReactionAppear 2.5s ease-out forwards;
    pointer-events: none;
    z-index: 10;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    transform: translate(-50%, -50%) rotate(var(--rotation, 0deg));
    white-space: nowrap;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transform-origin: center center;
}

[data-theme="dark"] .curious-reaction-text {
    background: rgba(0, 0, 0, 0.95);
    color: var(--text-primary);
}

[data-theme="light"] .curious-reaction-text {
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
}

@keyframes curiousReactionAppear {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(0.5) translateY(20px);
    }
    15% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1.1) translateY(-10px);
    }
    85% {
        opacity: 1;
        transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1) translateY(-40px);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(0.9) translateY(-70px);
    }
}

/* ============================================
   Section 05: 사랑 세포
   ============================================ */

/* 떨어지는 하트 (밑에 쌓이는 하트) */
.falling-heart {
    position: absolute;
    pointer-events: none;
    z-index: 3;
    will-change: transform, top;
}

.falling-heart svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

/* 커지는 하트 (입력 시) */
.growing-heart {
    position: absolute;
    pointer-events: none;
    z-index: 10;
}

.growing-heart svg {
    width: 100%;
    height: 100%;
    display: block;
}

.love-input {
    position: absolute;
    bottom: 2rem;
    left: 4rem;
    width: 100%;
    max-width: 400px;
    padding: 1rem 1.5rem;
    font-size: 1.2rem;
    font-family: inherit;
    border: 2px solid var(--text-primary);
    border-radius: 30px;
    background: var(--bg-primary);
    color: var(--text-primary);
    outline: none;
    transition: all 0.3s ease;
    z-index: 10;
    margin-left :2rem;
}

.love-input:focus {
    border-color: #FF6B80;
    box-shadow: 0 0 0 3px rgba(255, 107, 128, 0.2);
    transform: scale(1.02);
}

.love-input::placeholder {
    color: var(--text-secondary);
    opacity: 0.6;
}

[data-theme="dark"] .love-input {
    border-color: var(--text-primary);
}

[data-theme="dark"] .love-input:focus {
    border-color: #FF6B80;
    box-shadow: 0 0 0 3px rgba(255, 107, 128, 0.3);
}

.love-particles-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
    overflow: hidden;
}

.heart-particle {
    position: absolute;
    font-size: 1rem;
    pointer-events: none;
    z-index: 3;
    will-change: transform, opacity;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.heart-burst {
    position: absolute;
    font-size: 4rem;
    animation: heartBurst 1s ease-out forwards;
    pointer-events: none;
    z-index: 10;
}

@keyframes heartBurst {
    0% {
        opacity: 0;
        transform: scale(0.5) translateY(0);
    }
    50% {
        opacity: 1;
        transform: scale(1.5) translateY(-30px);
    }
    100% {
        opacity: 0;
        transform: scale(2) translateY(-60px);
    }
}

/* ============================================
   Section 05: 쿨쿨 세포
   ============================================ */

.sleepy-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    pointer-events: none;
    transition: background 0.5s ease;
    z-index: 5;
}

.sleepy-overlay.dark {
    background: rgba(0, 0, 0, 1);
}

#sleepyCharacter,
[data-cell="cool"] {
    transition: transform 0.5s ease, opacity 0.5s ease;
    position: relative;
    z-index: 2;
}

/* 자는 상태 (.is-sleep) */
#sleepyCharacter.is-sleep,
[data-cell="cool"].is-sleep {
    transform: rotate(-5deg) scale(0.95);
    opacity: 0.7;
    animation: breathing 3s ease-in-out infinite;
}

@keyframes breathing {
    0%, 100% {
        transform: rotate(-5deg) scale(0.95);
        opacity: 0.7;
    }
    50% {
        transform: rotate(-5deg) scale(0.98);
        opacity: 0.75;
    }
}

/* 깨어난 상태 (.is-awake) */
#sleepyCharacter.is-awake,
[data-cell="cool"].is-awake {
    transform: rotate(0deg) scale(1.1);
    opacity: 1;
    animation: wakeUp 1s ease-out;
}

#sleepyCharacter.awake {
    animation: wakeUp 1s ease-out;
}

@keyframes wakeUp {
    0% {
        transform: rotate(-5deg) scale(0.95);
        opacity: 0.7;
    }
    50% {
        transform: rotate(2deg) scale(1.15);
        opacity: 1;
    }
    100% {
        transform: rotate(0deg) scale(1.1);
        opacity: 1;
    }
}

/* 눈 감기 효과 - 섹션 내부에만 적용 */
#section05 {
    position: relative;
    overflow: hidden;
}

.eye-cover {
    position: absolute;
    left: 0;
    width: 100%;
    background: #000000;
    z-index: 100;
    pointer-events: none;
    transition: height 0.1s linear;
}

.eye-cover-top {
    top: 0;
    height: 0%;
}

.eye-cover-bottom {
    bottom: 0;
    height: 0%;
}

[data-theme="dark"] .eye-cover {
    background: #ffffff;
}

/* 깜빡임 효과 */
#sleepyCharacter.is-blinking {
    animation: blink 0.2s ease-in-out;
}

@keyframes blink {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.3;
    }
}

/* Zzz 컨테이너 - 비 효과 */
.sleepy-zzz-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 101;
    overflow: hidden;
}

/* Zzz 효과 - 잠을 표현하는 Zzz */
.sleepy-zzz-drop {
    position: absolute;
    font-family: inherit;
    user-select: none;
    will-change: transform, opacity;
    transform-origin: center center;
}

@keyframes zzzFloat {
    0%, 100% {
        transform: translateY(0) rotate(var(--rotation, 0deg));
        opacity: var(--base-opacity, 0.6);
    }
    50% {
        transform: translateY(-8px) rotate(calc(var(--rotation, 0deg) + 2deg));
        opacity: calc(var(--base-opacity, 0.6) + 0.1);
    }
}

[data-theme="dark"] .sleepy-zzz-drop {
    color: rgba(0, 0, 0, 0.9) !important;
    text-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
}

/* 힌트 메시지 - 섹션 내부에 표시 */
.sleepy-hint {
    position: absolute;
    bottom: 5rem;
    left: 50%;
    transform: translateX(-50%);
    padding: 1rem 2rem;
    background: rgba(0, 0, 0, 0.85);
    color: #ffffff;
    border-radius: 30px;
    font-size: 1.2rem;
    font-weight: 600;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    z-index: 102;
    transition: opacity 0.5s ease, visibility 0.5s ease;
    text-align: center;
    white-space: nowrap;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px);
    animation: hintPulse 2s ease-in-out infinite;
}

@keyframes hintPulse {
    0%, 100% {
        transform: translateX(-50%) scale(1);
    }
    50% {
        transform: translateX(-50%) scale(1.05);
    }
}

[data-theme="dark"] .sleepy-hint {
    background: rgba(255, 255, 255, 0.9);
    color: #000000;
    box-shadow: 0 4px 20px rgba(255, 255, 255, 0.3);
}

/* ============================================
   Section 06: 불안 세포
   ============================================ */

#section06 {
    position: relative;
    z-index: 1;
    isolation: isolate; /* stacking context 생성 */
    background-color: var(--bg-secondary);
    overflow: hidden; /* 뒤의 요소가 보이지 않도록 */
}

#section06.anxiety-shake-active {
    animation: anxietyShake 0.1s infinite;
    will-change: transform; /* 성능 최적화 */
    backface-visibility: hidden; /* 뒤의 요소가 보이지 않도록 */
}

@keyframes anxietyShake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(calc(-2px * var(--shake-intensity, 1)), calc(2px * var(--shake-intensity, 1))) rotate(calc(0.5deg * var(--shake-intensity, 1))); }
    50% { transform: translate(calc(2px * var(--shake-intensity, 1)), calc(-2px * var(--shake-intensity, 1))) rotate(calc(-0.5deg * var(--shake-intensity, 1))); }
    75% { transform: translate(calc(-2px * var(--shake-intensity, 1)), calc(-2px * var(--shake-intensity, 1))) rotate(calc(0.5deg * var(--shake-intensity, 1))); }
}

#anxietyCharacter {
    transition: filter 0.1s ease;
}

#anxietyCharacter.glitch {
    animation: glitchEffect 0.3s;
}

#anxietyCharacter.shadow-shake {
    animation: shadowShake 0.15s infinite;
}

#anxietyCharacter.anxiety-blur {
    filter: blur(3px);
    transition: filter 0.2s ease;
}

/* 불안도 게이지 */
.anxiety-gauge-container {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    width: 300px;
    z-index: 10;
}

.anxiety-gauge-label {
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.anxiety-gauge-bar {
    width: 100%;
    height: 20px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    overflow: hidden;
    border: 2px solid var(--text-primary);
}

.anxiety-gauge-fill {
    height: 100%;
    width: 50%;
    background: #FF9800;
    transition: width 0.3s ease, background 0.3s ease;
    border-radius: 8px;
}

[data-theme="dark"] .anxiety-gauge-bar {
    background: rgba(255, 255, 255, 0.2);
}

/* 안내 메시지 */
.anxiety-hint {
    position: absolute;
    top: 2rem;
    left: 50%;
    transform: translateX(-50%);
    padding: 1rem 2rem;
    background: rgba(0, 0, 0, 0.8);
    color: #ffffff;
    border-radius: 20px;
    font-size: 1rem;
    font-weight: 600;
    text-align: center;
    white-space: nowrap;
    z-index: 15;
    pointer-events: none;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(10px);
    transition: color 0.3s ease;
}

[data-theme="dark"] .anxiety-hint {
    background: rgba(255, 255, 255, 0.9);
    color: #000000;
}

/* 불안 메시지 컨테이너 */
.anxiety-messages-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
}

/* 불안 메시지 */
.anxiety-message {
    position: absolute;
    font-size: 1.8rem;
    font-weight: 700;
    color: #FF9800;
    pointer-events: none;
    text-align: center;
    white-space: nowrap;
    transition: opacity 0.3s ease, color 0.3s ease;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
    animation: messageFloat 3s ease-in-out infinite;
    will-change: transform, opacity;
    --message-rotation: 0deg;
}

/* 불안 메시지 태그 스타일 */
.anxiety-message.anxiety-tag {
    padding: 0;
    background: none;
    border: none;
}

.anxiety-message .tag-content {
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 1.4rem;
    font-weight: 700;
    white-space: nowrap;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 6px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    border: 2px solid;
    transition: all 0.3s ease;
}

/* 레벨별 태그 색상 */
.anxiety-message[data-level="calm"] .tag-content {
    background: rgba(76, 175, 80, 0.9);
    border-color: rgba(76, 175, 80, 1);
    color: #fff;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4), 0 2px 6px rgba(76, 175, 80, 0.3);
}

.anxiety-message[data-level="low"] .tag-content {
    background: rgba(255, 193, 7, 0.9);
    border-color: rgba(255, 193, 7, 1);
    color: #fff;
    box-shadow: 0 4px 12px rgba(255, 193, 7, 0.4), 0 2px 6px rgba(255, 193, 7, 0.3);
}

.anxiety-message[data-level="medium"] .tag-content {
    background: rgba(255, 152, 0, 0.9);
    border-color: rgba(255, 152, 0, 1);
    color: #fff;
    box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4), 0 2px 6px rgba(255, 152, 0, 0.3);
}

.anxiety-message[data-level="high"] .tag-content {
    background: rgba(244, 67, 54, 0.95);
    border-color: rgba(244, 67, 54, 1);
    color: #fff;
    box-shadow: 0 4px 16px rgba(244, 67, 54, 0.6), 0 2px 8px rgba(244, 67, 54, 0.4);
    animation: tagPulse 2s ease-in-out infinite;
}

@keyframes tagPulse {
    0%, 100% {
        box-shadow: 0 4px 16px rgba(244, 67, 54, 0.6), 0 2px 8px rgba(244, 67, 54, 0.4);
    }
    50% {
        box-shadow: 0 6px 20px rgba(244, 67, 54, 0.8), 0 3px 10px rgba(244, 67, 54, 0.6);
    }
}

@keyframes messageFloat {
    0%, 100% {
        transform: translate(-50%, -50%) translateY(0) rotate(var(--message-rotation, 0deg));
    }
    50% {
        transform: translate(-50%, -50%) translateY(-10px) rotate(var(--message-rotation, 0deg));
    }
}

[data-theme="dark"] .anxiety-message {
    text-shadow: none;
}

[data-theme="dark"] .anxiety-message .tag-content {
    backdrop-filter: blur(15px);
}

[data-theme="dark"] .anxiety-message[data-level="low"] .tag-content {
    color: #fff;
}

/* 안정화 상태 */
#anxietyCharacter.anxiety-calm {
    animation: calmPulse 2s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(76, 175, 80, 0.5));
}

@keyframes calmPulse {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.05);
        opacity: 0.95;
    }
}

@keyframes shadowShake {
    0%, 100% {
        filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
    }
    25% {
        filter: drop-shadow(-3px 3px 8px rgba(255, 0, 0, 0.7));
    }
    50% {
        filter: drop-shadow(3px -3px 8px rgba(255, 0, 0, 0.7));
    }
    75% {
        filter: drop-shadow(-3px -3px 8px rgba(255, 0, 0, 0.7));
    }
}

@keyframes glitchEffect {
    0%, 100% {
        filter: drop-shadow(0 0 0 transparent);
        outline: 2px solid transparent;
    }
    25% {
        filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.8));
        outline: 2px solid rgba(255, 0, 0, 0.8);
    }
    50% {
        filter: drop-shadow(0 0 8px rgba(255, 0, 0, 1));
        outline: 2px solid rgba(255, 0, 0, 1);
    }
    75% {
        filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.8));
        outline: 2px solid rgba(255, 0, 0, 0.8);
    }
    25% {
        filter: drop-shadow(-3px 0 0 #ff0000) drop-shadow(3px 0 0 #00ff00);
    }
    50% {
        filter: drop-shadow(3px 0 0 #ff0000) drop-shadow(-3px 0 0 #00ff00);
    }
    75% {
        filter: drop-shadow(-2px 0 0 #ff0000) drop-shadow(2px 0 0 #00ff00);
    }
}

.anxiety-flash {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 0, 0, 0.3);
    pointer-events: none;
    animation: flashEffect 0.5s ease-out;
    z-index: 10;
}

@keyframes flashEffect {
    0% {
        opacity: 0;
        filter: blur(0px);
    }
    50% {
        opacity: 1;
        filter: blur(20px);
    }
    100% {
        opacity: 0;
        filter: blur(0px);
    }
}

/* ============================================
   Section 07: 관종 세포
   ============================================ */

#section07.attention-distort {
    filter: blur(2px);
    transition: filter 0.3s ease;
}

#section07.attention-distort::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
        transparent 0%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 100%);
    pointer-events: none;
    z-index: 1;
    animation: distortWave 2s ease-in-out infinite;
}

@keyframes distortWave {
    0%, 100% {
        transform: scale(1);
        opacity: 0.3;
    }
    50% {
        transform: scale(1.1);
        opacity: 0.5;
    }
}

#attentionCharacter {
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

#attentionCharacter.attention-seeking {
    animation: attentionShake 0.5s ease-in-out infinite;
}

@keyframes attentionShake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(-5px, -5px) rotate(-2deg); }
    75% { transform: translate(5px, 5px) rotate(2deg); }
}

.attention-message {
    position: absolute;
    top: -50px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--accent-primary);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    white-space: nowrap;
    z-index: 10;
}

.attention-message.visible {
    opacity: 1;
}

.spotlight {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.4) 0%, transparent 70%);
    pointer-events: none;
    animation: spotlightFade 1s ease-out;
    z-index: 1;
}

@keyframes spotlightFade {
    0% {
        opacity: 1;
        transform: scale(0.5);
    }
    100% {
        opacity: 0;
        transform: scale(2);
    }
}

/* ============================================
   Section 08: 상상 세포
   ============================================ */

#section09 {
    transition: filter 0.3s ease;
}

#section09.dream-blur {
    filter: blur(5px);
}

#section09.dream-distort {
    position: relative;
}

#section09.dream-distort::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at var(--mouse-x, 50%) var(--mouse-y, 50%), 
        transparent 0%, 
        rgba(255, 255, 255, 0.15) 40%, 
        transparent 80%);
    pointer-events: none;
    z-index: 1;
    animation: dreamDistort 3s ease-in-out infinite;
    mix-blend-mode: overlay;
}

@keyframes dreamDistort {
    0%, 100% {
        transform: scale(1) rotate(0deg);
        opacity: 0.2;
    }
    50% {
        transform: scale(1.2) rotate(5deg);
        opacity: 0.4;
    }
}

.dream-clouds {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
}

.cloud {
    position: absolute;
    width: 150px;
    height: 100px;
    opacity: 0;
    animation: cloudFloat 3s ease-out forwards;
}

@keyframes cloudFloat {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
    }
    20% {
        opacity: 1;
    }
    80% {
        opacity: 1;
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) translateY(-100px) scale(1.2);
    }
}

.dream-text {
    position: absolute;
    font-size: 1.5rem;
    color: var(--text-primary);
    font-weight: 500;
    opacity: 0;
    animation: dreamTextFade 2s ease-out forwards;
    pointer-events: none;
    z-index: 3;
}

@keyframes dreamTextFade {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    30%, 70% {
        opacity: 1;
        transform: translateY(0);
    }
    100% {
        opacity: 0;
        transform: translateY(-20px);
    }
}

/* ============================================
   Section 09: 패션 세포
   ============================================ */

.fashion-items-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 3;
    overflow: visible;
}

.fashion-item {
    position: absolute;
    font-size: 2.5rem;
    cursor: pointer;
    pointer-events: auto;
    transition: transform 0.3s ease, opacity 0.3s ease;
    z-index: 5;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    user-select: none;
}

.fashion-item:hover {
    transform: scale(1.2) translateY(-5px);
    filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.3));
}

.fashion-worn-items {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 4;
    overflow: visible;
}

.fashion-worn-item {
    position: absolute;
    font-size: 3rem;
    pointer-events: none;
    z-index: 6;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    user-select: none;
}

/* ============================================
   반응형 조정
   ============================================ */

/* 큰 데스크탑 화면 (1920px 이상) */
@media (min-width: 1920px) {
    .card-grid {
        gap: 5rem;
        padding: 5rem;
        max-width: 1800px;
    }
    
    .cell-card {
        width: 450px;
        height: 630px;
    }
    
    .cell-card-title {
        font-size: 1.5rem;
        padding: 1rem 2rem;
    }
    
    .anxiety-message {
        font-size: 2.2rem;
    }
    
    .anxiety-message .tag-content {
        font-size: 1.7rem;
        padding: 0.7rem 1.3rem;
    }
    
    .anxiety-gauge-container {
        font-size: 1.1rem;
    }
    
    .anxiety-hint {
        font-size: 1.2rem;
    }
    
    .attention-message {
        font-size: 1.8rem;
    }
    
    /* 쿨쿨세포 */
    .sleepy-zzz-drop {
        font-size: 5rem;
    }
    
    .sleepy-hint {
        font-size: 1.5rem;
        padding: 1.2rem 2rem;
    }
    
    /* 상상세포 */
    .dream-controls {
        padding: 1.2rem;
        max-width: 240px;
        gap: 0.7rem;
    }
    
    .dream-controls label {
        font-size: 0.85rem;
    }
    
    .dream-controls select,
    .dream-controls input,
    .dream-controls button {
        font-size: 0.8rem;
        padding: 0.45rem 0.6rem;
    }
    
    /* 사랑세포 */
    .love-input {
        font-size: 1.4rem;
        padding: 1.2rem 1.8rem;
        max-width: 480px;
    }
    
    /* 호기심세포 */
    .curious-reaction-text {
        font-size: 2.1rem;
        padding: 1rem 1.8rem;
    }
}

/* 큰 데스크탑 화면 (1920px 이상) */
@media (min-width: 1920px) {
    .card-grid {
        gap: 5rem;
        padding: 5rem;
        max-width: 1800px;
    }
    
    .cell-card {
        width: 450px;
        height: 630px;
    }
    
    .cell-card-title {
        font-size: 1.5rem;
        padding: 1rem 2rem;
    }
    
    .anxiety-message {
        font-size: 2.2rem;
    }
    
    .anxiety-message .tag-content {
        font-size: 1.7rem;
        padding: 0.7rem 1.3rem;
    }
    
    .anxiety-gauge-container {
        font-size: 1.1rem;
    }
    
    .anxiety-hint {
        font-size: 1.2rem;
    }
    
    .attention-message {
        font-size: 1.8rem;
    }
    
    /* 쿨쿨세포 */
    .sleepy-zzz-drop {
        font-size: 5rem;
    }
    
    .sleepy-hint {
        font-size: 1.5rem;
        padding: 1.2rem 2rem;
    }
    
    /* 상상세포 */
    .dream-controls {
        padding: 1.2rem;
        max-width: 240px;
        gap: 0.7rem;
    }
    
    .dream-controls label {
        font-size: 0.85rem;
    }
    
    .dream-controls select,
    .dream-controls input,
    .dream-controls button {
        font-size: 0.8rem;
        padding: 0.45rem 0.6rem;
    }
    
    /* 사랑세포 */
    .love-input {
        font-size: 1.4rem;
        padding: 1.2rem 1.8rem;
        max-width: 480px;
    }
    
    /* 호기심세포 */
    .curious-reaction-text {
        font-size: 2.1rem;
        padding: 1rem 1.8rem;
    }
}

@media (max-width: 768px) {
    .card-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        padding: 1rem;
    }
    
    .cell-card-image {
        width: 80px;
        height: 80px;
    }
    
    .cell-card-title {
        font-size: 1.2rem;
    }
    
    .cell-character-container {
        width: 200px;
        height: 200px;
    }
}

@media (max-width: 480px) {
    .card-grid {
        grid-template-columns: 1fr;
    }
}

